<!DOCTYPE html>
<html lang="en">
<head>
  <?php
  // Key Loader for APIs (Public Keys Only - Local Dev; Use Server Env for Prod)
  require_once __DIR__ . '/vendor/autoload.php';  // Composer Autoload (Assumes in Root)
  use Dotenv\Dotenv;
  $dotenv = Dotenv::createImmutable(__DIR__);
  $dotenv->safeLoad();  // Safe: No error if .env missing
  $turnstileSiteKey = $_ENV['TURNSTILE_SITE_KEY'] ?? 'YOUR_PLACEHOLDER_KEY';  // Fallback for test
  $googleApiKey = $_ENV['GOOGLE_API_KEY'] ?? 'YOUR_PLACEHOLDER_KEY';
  ?>
  <script>
    window.TURNSTILE_SITE_KEY = '<?php echo htmlspecialchars($turnstileSiteKey); ?>';
    window.GOOGLE_API_KEY = '<?php echo htmlspecialchars($googleApiKey); ?>';
  </script>

  <!--<script async defer src="https://maps.googleapis.com/maps/api/js?key=<?php echo htmlspecialchars($googleApiKey); ?>&libraries=places&callback=initAutocomplete">
  </script>-->

  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Hiring | Discount Cuts & Services</title>
  <meta name="description" content="Join the Discount Cuts & Services team! We're hiring skilled barbers, landscapers, and more. Competitive pay, flexible hours, and a great work environment.">
  <meta content="" name="keywords">

  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "Discount Cuts & Services",
    "description": "Affordable landscaping and home services in South Fulton, Chattahoochee Hills, Fairburn, Union City, Southwest Atlanta, Paulding, GA",
    "url": "https://www.discountcutsandservices.com",
    "telephone": "678-907-1925",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "Dallas",
      "addressRegion": "GA",
      "addressCountry": "US"
    },
    "geo": {
      "@type": "GeoCoordinates",
      "latitude": 33.9159,
      "longitude": -84.8383
    },
    "serviceArea": [
      {"@type": "City", "name": "South Fulton"},
      {"@type": "City", "name": "Chattahoochee Hills"},
      {"@type": "City", "name": "Fairburn"},
      {"@type": "City", "name": "Union City"},
      {"@type": "City", "name": "Southwest Atlanta"},
      {"@type": "AdministrativeArea", "name": "Paulding County"},
      {"@type": "AdministrativeArea", "name": "Cobb County"}
    ],
    "openingHours": "Mo-Su 08:00-18:00",
    "priceRange": "$$"
  }
  </script>

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Montserrat:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/icofont/icofont.min.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/venobox/venobox.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
  <link href="assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

  <!-- Swiper JS -->
  <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>

  <!-- Google Places Autocomplete API -->
  <script async defer src="https://maps.googleapis.com/maps/api/js?key=<?php echo htmlspecialchars($googleApiKey); ?>&libraries=places&callback=initAutocomplete"></script>

<script>
  window.initAutocomplete = function() {
    // Retry wrapper: Ensure full load
    let retryCount = 0;
    const maxRetries = 3;
    function attemptInit() {
      if (document.readyState === 'loading') {
        console.log('DOM loading—waiting for DOMContentLoaded');
        document.addEventListener('DOMContentLoaded', attemptInit);
        return;
      }

      const streetInput = document.getElementById('street_address');
      
      if (!streetInput) {
        console.warn('Street address input not found—retrying...');
        if (retryCount < maxRetries) {
          retryCount++;
          setTimeout(attemptInit, 500);
          return;
        }
        console.error('Street input missing after retries—autocomplete disabled');
        return;
      }

      // Type check
      if (!(streetInput instanceof HTMLInputElement)) {
        console.error('Street input invalid type:', streetInput);
        return;
      }

      if (!window.google || !window.google.maps || !window.google.maps.places) {
        console.warn(`Google Places not ready (retry ${retryCount + 1}/${maxRetries})`);
        if (retryCount < maxRetries) {
          retryCount++;
          setTimeout(attemptInit, 500);
          return;
        }
        console.error('Google Places failed to load after retries');
        return;
      }

      try {
        console.log('Autocomplete init starting on:', streetInput.id);

        const options = {
          types: ['address'],
          componentRestrictions: { country: 'us' }
        };

        const autocomplete = new window.google.maps.places.Autocomplete(streetInput, options);
        console.log('Autocomplete created:', autocomplete);

        autocomplete.addListener('place_changed', () => {
          console.log('Place changed event fired!');
          try {
            const place = autocomplete.getPlace();

            if (!place.geometry || !place.address_components) {
              console.warn('Incomplete place data');
              return;
            }

            // Clear other fields
            const cityEl = document.getElementById('city');
            const stateEl = document.getElementById('state');
            const zipEl = document.getElementById('zip');
            if (cityEl) cityEl.value = '';
            if (stateEl) stateEl.value = '';
            if (zipEl) zipEl.value = '';

            let street = '';
            const components = place.address_components || [];

            components.forEach(component => {
              const types = component.types;
              if (types.includes('street_number')) street += component.long_name + ' ';
              else if (types.includes('route')) street += component.long_name;
              else if (types.includes('locality') || types.includes('sublocality')) {
                if (cityEl) cityEl.value = component.long_name;
              } else if (types.includes('administrative_area_level_1')) {
                if (stateEl) stateEl.value = component.short_name;
              } else if (types.includes('postal_code')) {
                if (zipEl) zipEl.value = component.long_name;
              }
            });

            if (place.formatted_address && !street.trim()) {
              street = place.formatted_address.split(',')[0].trim();
            }
            streetInput.value = street;

            // Trigger changes
            [cityEl, stateEl, zipEl].forEach(el => {
              if (el && el.value) el.dispatchEvent(new Event('change', { bubbles: true }));
            });

            console.log('Fields populated:', {
              street: streetInput.value,
              city: cityEl?.value,
              state: stateEl?.value,
              zip: zipEl?.value
            });
          } catch (error) {
            console.error('Place handler error:', error);
          }
        });

        console.log('Google Places Autocomplete fully initialized!');
      } catch (error) {
        console.error('Autocomplete creation error:', error);
        if (retryCount < maxRetries) {
          retryCount++;
          setTimeout(attemptInit, 500);
        }
      }
    }

    // Kick off
    attemptInit();
  };
</script>

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top">
    <div class="container-fluid d-flex align-items-center justify-content-between px-3 px-md-5">
      <!-- Logo -->
      <div class="col-auto">
        <a href="index.html" class="logo me-auto"><img src="assets/img/logo-xs.png" alt="Discount Cuts & Services logo" class="img-fluid"></a>
      </div>

      <!-- Desktop Nav -->
      <nav class="nav-menu d-none d-lg-block mx-auto">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="index.html#about">About</a></li>
          <li><a href="index.html#services">Services</a></li>
          <li><a href="index.html#portfolio">Portfolio</a></li>
          <li><a href="index.html#testimonials">Reviews</a></li>
          <li><a href="index.html#contact">Contact</a></li>
          <li class="active"><a href="hiring.html" class="nav-link">Now Hiring <span class="badge bg-warning text-dark ms-1">Apply Now</span></a></li>  <!-- Added class="active" -->
        </ul>
      </nav>

      <!-- Hiring Button & Mobile Toggle -->
      <div class="d-flex align-items-center col-auto">
        <!--Removed Hiring Button-->
        <!-- Mobile Nav Toggle -->
        <i class="bi bi-list mobile-nav-toggle d-lg-none text-dark fs-3 ms-3" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"></i>
      </div>

      <!-- Mobile Nav Collapse (Hidden on Desktop) -->
      <nav class="navbar navbar-light bg-light collapse d-lg-none mt-2" id="navbarNav">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
          <li class="nav-item"><a class="nav-link" href="index.html#about">About</a></li>
          <li class="nav-item"><a class="nav-link" href="index.html#services">Services</a></li>
          <li class="nav-item"><a class="nav-link" href="index.html#portfolio">Portfolio</a></li>
          <li class="nav-item"><a class="nav-link" href="index.html#testimonials">Reviews</a></li>
          <li class="nav-item"><a class="nav-link" href="index.html#contact">Contact</a></li>
          <li class="nav-item active"><a class="nav-link" href="hiring.html">Now Hiring <span class="badge bg-warning text-dark ms-1">Apply Now</span></a></li>  <!-- Added class="active" to li -->
        </ul>
      </nav>
    </div>
  </header><!-- End Header -->

  <!-- ======= Main Content ======= -->
  <main id="main">
    <div class="container py-5">
      <!-- Open Position Listing -->
      <section id="open-positions" class="job-listing py-4 mb-5">
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <h1 class="text-center mb-4">Now Hiring: Lawncare Technician</h1>
            <div class="card shadow-lg border-0 h-100" data-aos="fade-up" data-aos-delay="100">
              <div class="card-header bg-success text-white text-center py-4">
                <i class="bi bi-tree-fill fs-1 mb-2"></i>
                <h2 class="card-title mb-0">Lawncare Technician</h2>
                <p class="mb-0">Full-Time</p>
              </div>
              <div class="card-body p-4">
                <h5 class="card-subtitle mb-3 text-muted">What You'll Do</h5>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item border-0 px-0 py-2">
                    <i class="bi bi-check-circle-fill text-success me-2"></i>
                    Perform lawn mowing, edging, and mulching for residential/commercial clients in South Fulton, Fairburn, and surrounding areas.
                  </li>
                  <li class="list-group-item border-0 px-0 py-2">
                    <i class="bi bi-check-circle-fill text-success me-2"></i>
                    Handle pressure washing, leaf removal, and basic landscaping installs.
                  </li>
                  <li class="list-group-item border-0 px-0 py-2">
                    <i class="bi bi-check-circle-fill text-success me-2"></i>
                    Maintain equipment and ensure sites are left clean and customer-ready.
                  </li>
                </ul>
                
                <hr class="my-4">
                
                <h5 class="card-subtitle mb-3 text-muted">What We're Looking For</h5>
                <ul class="list-group list-group-flush">
                  <li class="list-group-item border-0 px-0 py-2">
                    <i class="bi bi-check-circle-fill text-success me-2"></i>
                    1+ years in landscaping or outdoor services (entry-level OK with enthusiasm!).
                  </li>
                  <li class="list-group-item border-0 px-0 py-2">
                    <i class="bi bi-check-circle-fill text-success me-2"></i>
                    Valid driver's license and reliable transportation.
                  </li>
                  <li class="list-group-item border-0 px-0 py-2">
                    <i class="bi bi-check-circle-fill text-success me-2"></i>
                    Team player ready for flexible hours (Mo-Su, 8AM–6PM).
                  </li>
                </ul>
                
                <hr class="my-4">
                
                <h5 class="card-subtitle mb-3 text-muted">Why Join Us?</h5>
                <div class="row text-center">
                  <div class="col-md-4 mb-3">
                    <i class="bi bi-currency-dollar fs-2 text-primary mb-1"></i>
                    <p class="mb-0"><strong>Competitive Pay</strong><br>Weekly bonuses for top performance.</p>
                  </div>
                  <div class="col-md-4 mb-3">
                    <i class="bi bi-tools fs-2 text-primary mb-1"></i>
                    <p class="mb-0"><strong>Tools Provided</strong><br>Equipment, uniforms, and training included.</p>
                  </div>
                  <div class="col-md-4 mb-3">
                    <i class="bi bi-people-fill fs-2 text-primary mb-1"></i>
                    <p class="mb-0"><strong>Growing Team</strong><br>Family-like vibe in a booming local biz.</p>
                  </div>
                </div>
              </div>
              <div class="card-footer bg-light text-center py-3">
                <a href="#apply-form" class="btn btn-success btn-lg me-2">Apply Now</a>
                <!--Hiding this for now
                <a href="tel:678-907-1925" class="btn btn-outline-success btn-lg">Call to Chat (678-907-1925)</a>
              -->
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Application Form Section (Hidden Initially) -->
      <section id="apply-form" class="application-form py-5 bg-light mt-5 pt-4">
        <h2 class="text-center mb-4">Apply for Lawncare Technician</h2>
        <p class="text-center text-muted mb-4">Fill out the form below—we'll review and get back to you within 48 hours. Questions? Call 678-907-1925.</p>
        
        <div class="row justify-content-center">
          <div class="col-lg-8">
            <form action="forms/employment_application.php" method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
              <!-- Honeypot (hidden spam trap) -->
              <div style="position: absolute; left: -9999px;">
                <input type="text" name="honeypot" tabindex="-1" value="">
              </div>
              
              <!-- Personal Info Row -->
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="full_name" class="form-label">Full Name <span class="text-danger">*</span></label>
                  <input type="text" class="form-control" id="full_name" name="full_name" required minlength="2">
                  <div class="invalid-feedback">Please enter your full name (at least 2 characters).</div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="email" class="form-label">Email Address <span class="text-danger">*</span></label>
                  <input type="email" class="form-control" id="email" name="email" required>
                  <div class="invalid-feedback">Please provide a valid email address.</div>
                </div>
              </div>

              <div class="mb-3">
                <label for="phone" class="form-label">Phone Number</label>
                <input type="tel" class="form-control" id="phone" name="phone" pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}">
                <div class="form-text">Format: XXX-XXX-XXXX (optional).</div>
                <div class="invalid-feedback">Please use the format XXX-XXX-XXXX.</div>
              </div>

              <!-- Address Fields -->
<div class="row">
  <div class="col-md-8 mb-3">
    <label for="street_address" class="form-label">Street Address <span class="text-danger">*</span></label>
    <input type="text" class="form-control" id="street_address" name="street_address" required placeholder="123 Main St">
    <div class="invalid-feedback">Please provide your street address.</div>
  </div>
  <div class="col-md-4 mb-3">
    <label for="apt_suite" class="form-label">Apt/Suite (Optional)</label>
    <input type="text" class="form-control" id="apt_suite" name="apt_suite" placeholder="Apt #101">
  </div>
</div>
<div class="row">
  <div class="col-md-4 mb-3">
    <label for="city" class="form-label">City <span class="text-danger">*</span></label>
    <input type="text" class="form-control" id="city" name="city" required>
    <div class="invalid-feedback">Please provide your city.</div>
  </div>
  <div class="col-md-3 mb-3">
    <label for="state" class="form-label">State <span class="text-danger">*</span></label>
    <select class="form-select" id="state" name="state" required>
      <option value="">Select State</option>
      <option value="AL">AL</option>
      <option value="AK">AK</option>
      <!-- Add all 50 US states here; or use a JS populate if preferred -->
      <option value="GA">GA</option>
      <!-- ... continue for brevity; full list at bottom if needed -->
    </select>
    <div class="invalid-feedback">Please select your state.</div>
  </div>
  <div class="col-md-2 mb-3">
    <label for="zip" class="form-label">ZIP Code <span class="text-danger">*</span></label>
    <input type="text" class="form-control" id="zip" name="zip" required pattern="\d{5}(-\d{4})?" maxlength="10" placeholder="12345">
    <div class="invalid-feedback">Please provide a valid ZIP code.</div>
  </div>
  <div class="col-md-3 mb-3">
    <label for="phone" class="form-label">Phone <span class="text-danger">*</span></label> <!-- Assuming this follows; adjust if not -->
    <!-- Existing phone field here -->
  </div>
</div>

              <!-- Experience & Pay Row -->
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label for="years_experience" class="form-label">Years of Relevant Experience <span class="text-danger">*</span></label>
                  <input type="number" class="form-control" id="years_experience" name="years_experience" required min="0" step="0.1">
                  <div class="invalid-feedback">Please enter years of experience (0+).</div>
                </div>
                <div class="col-md-6 mb-3">
                  <label for="desired_pay" class="form-label">Desired Pay $<span class="text-danger">*</span></label>
                  <input type="number" class="form-control" id="desired_pay" name="desired_pay" required min="0" step="0.01" placeholder="e.g., 15.00">
                  <div class="invalid-feedback">Please enter your desired hourly pay (e.g., 15.00).</div>
                </div>
              </div>

              <!-- Checkboxes Row -->
              <div class="row mb-3">
                <div class="col-md-6">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="drivers_license" name="drivers_license" value="yes">
                    <label class="form-check-label" for="drivers_license">
                      Valid Driver's License?
                    </label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="reliable_transport" name="reliable_transport" value="yes">
                    <label class="form-check-label" for="reliable_transport">
                      Reliable Transportation?
                    </label>
                  </div>
                </div>
              </div>

              <!-- Cover Letter -->
              <div class="mb-4">
                <label for="cover_letter" class="form-label">Cover Letter <span class="text-danger">*</span></label>
                <textarea class="form-control" id="cover_letter" name="cover_letter" rows="5" required minlength="50"></textarea>
                <div class="form-text">Tell us why you're a great fit (at least 50 characters).</div>
                <div class="invalid-feedback">Please provide a cover letter (at least 50 characters).</div>
              </div>

              <!-- Legal Statement (Static Text from PDF) -->
              <div class="alert alert-info mb-4" role="alert">
                <strong>Important Statement:</strong><br>
                Applying for a position with Discount Cuts & Services does not guarantee an offer of employment. We review all applications and select candidates based on qualifications and business needs.<br><br>
                By submitting this application and signing below, you attest that all information provided is true to the best of your knowledge. Any false statements or omissions may result in disqualification from consideration or termination of employment if hired.<br><br>
                This application will be considered active for 30 days from the date of submission. Discount Cuts & Services reserves the right to terminate employment at any time with or without cause. (Georgia employment may be terminated by either party at any time with or without cause.)
              </div>

              <!-- Agreement Checkbox & Date -->
              <div class="row mb-3">
                <div class="col-md-8">
                  <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="agreement" name="agreement" value="yes" required>
                    <label class="form-check-label" for="agreement">
                      I agree to the above statement. <span class="text-danger">*</span>
                    </label>
                    <div class="invalid-feedback">You must agree to the statement to submit.</div>
                  </div>
                </div>
                <div class="col-md-4">
                  <label for="application_date" class="form-label">Date <span class="text-danger">*</span></label>
                  <input type="date" class="form-control" id="application_date" name="application_date" required>
                  <div class="invalid-feedback">Please provide the application date.</div>
                </div>
              </div>

              <!-- Printed Name (Electronic Signature) -->
              <div class="mb-4">
                <label for="printed_name" class="form-label">Printed Name (Electronic Signature) <span class="text-danger">*</span></label>
                <input type="text" class="form-control" id="printed_name" name="printed_name" required minlength="2">
                <div class="form-text">Retype your full name to confirm (must match above).</div>
                <div class="invalid-feedback">Printed name must match your full name.</div>
              </div>

              <!-- Turnstile -->
              <div class="mb-3">
                <div class="cf-turnstile" data-sitekey="<?php echo htmlspecialchars($turnstileSiteKey); ?>"></div>
              </div>

              <!-- Submit Button -->
              <div class="text-center">
                <button class="btn btn-success btn-lg" type="submit">Submit Application</button>
              </div>
            </form>
          </div>
        </div>
      </section>
    </div>
  </main><!-- End Main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container footer-bottom clearfix">
      <div class="copyright">
        &copy; Copyright <strong><span>Discount Cuts & Services</span></strong>. All Rights Reserved
      </div>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/jquery/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
  <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/counterup/counterup.min.js"></script>
  <script src="assets/vendor/owl.carousel/owl.carousel.min.js"></script>
  <script src="assets/vendor/venobox/venobox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

  <!-- Consolidated JS: Validation, Autocomplete, Error Suppress, Success Alert -->
  <script>
    // Bootstrap Form Validation
    (function () {
      'use strict'
      var forms = document.querySelectorAll('.needs-validation')
      Array.prototype.slice.call(forms).forEach(function (form) {
        form.addEventListener('submit', function (event) {
          if (!form.checkValidity()) {
            event.preventDefault()
            event.stopPropagation()
          }
          form.classList.add('was-validated')
        }, false)
      })
    })()

    // Auto-fill date, printed name match, and success alert
    document.addEventListener('DOMContentLoaded', function() {
      // Auto-fill date
      const dateInput = document.getElementById('application_date');
      if (dateInput) {
        dateInput.valueAsDate = new Date();
      }
      
      // Prefill printed name from full name
      const fullNameInput = document.getElementById('full_name');
      const printedNameInput = document.getElementById('printed_name');
      if (fullNameInput && printedNameInput) {
        fullNameInput.addEventListener('input', function() {
          printedNameInput.value = this.value;
        });
      }
      
      // Custom validation for printed name match (integrated with Bootstrap submit)
      const form = document.querySelector('.needs-validation');
      if (form) {
        form.addEventListener('submit', function(event) {
          const fullName = fullNameInput ? fullNameInput.value.trim() : '';
          const printedName = printedNameInput ? printedNameInput.value.trim() : '';
          if (fullName && printedName && fullName !== printedName) {
            event.preventDefault();
            event.stopPropagation();
            if (printedNameInput) {
              printedNameInput.classList.add('is-invalid');
            }
            alert('Printed name must exactly match your full name for electronic signature.');
            return false;
          }
          // Fallback to Bootstrap validity check
          if (!form.checkValidity()) {
            event.preventDefault();
            event.stopPropagation();
          }
          form.classList.add('was-validated');
        });
      }

      // Success alert on redirect (e.g., ?success=1)
      const urlParams = new URLSearchParams(window.location.search);
      if (urlParams.get('success')) {
        alert('Application submitted successfully! We\'ll review and contact you soon.');
      } else if (urlParams.get('error')) {
        alert('Submission error: ' + urlParams.get('error') + '. Please try again.');
      }
    });

    // Suppress dev console noise for Turnstile/Maps (remove for prod)
    window.addEventListener('error', function(e) {
      if (e.message.includes('Turnstile') || e.message.includes('Google Maps')) {
        console.warn('Expected dev warning: ' + e.message);
        e.preventDefault();
        return false;
      }
    });
  </script>

</body>
</html>